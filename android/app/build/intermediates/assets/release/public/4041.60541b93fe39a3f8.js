"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4041],{4041:(U,f,s)=>{s.r(f),s.d(f,{GestionReservascliPageModule:()=>T});var g=s(6814),v=s(6223),a=s(878),d=s(9634),e=s(9212),m=s(1660),h=s(9306),_=s(405),p=s(2042),P=s(2471);function M(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",1),e._UZ(3,"ion-back-button",2),e.qZA(),e.TgZ(4,"ion-title",3),e._uU(5,"Gesti\xf3n Reservas"),e.qZA(),e.TgZ(6,"ion-buttons",4)(7,"ion-button",5),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.toggleDarkMode())}),e._UZ(8,"ion-icon",6),e.qZA(),e.TgZ(9,"ion-button",5),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.cerrarSesion())}),e._UZ(10,"ion-icon",7),e.qZA()()()()}if(2&o){const t=e.oxw();e.Tol(t.isDarkMode?"dark-theme":""),e.xp6(8),e.Q6J("name",t.isDarkMode?"sunny-outline":"moon-outline")}}const x=o=>({"data-row":!0,"dark-theme":o});function C(o,r){if(1&o&&(e.TgZ(0,"ion-item",15)(1,"ion-label",16),e._uU(2),e.qZA(),e.TgZ(3,"ion-label",16),e._uU(4),e.qZA(),e.TgZ(5,"ion-label",16),e._uU(6),e.qZA(),e.TgZ(7,"ion-label",16),e._UZ(8,"ion-icon",17),e.qZA()()),2&o){const t=r.$implicit,n=r.index,i=e.oxw(3);e.Udp("background-color",i.coloresFilas[n%i.coloresFilas.length]),e.Q6J("ngClass",e.VKq(9,x,i.isDarkMode)),e.xp6(2),e.Oqu(i.formatFechaHora(t.fechaHoraReserva)),e.xp6(2),e.Oqu(t.numPax),e.xp6(2),e.Oqu(t.notasEspeciales),e.xp6(2),e.Tol(i.getEstadoColor(t.estadoReserva)),e.Q6J("name","ellipse")}}function b(o,r){if(1&o&&(e.TgZ(0,"ion-list")(1,"ion-item",12)(2,"ion-label",13),e._uU(3,"Fecha y Hora"),e.qZA(),e.TgZ(4,"ion-label",13),e._uU(5,"Num. Pax"),e.qZA(),e.TgZ(6,"ion-label",13),e._uU(7,"Notas Especiales"),e.qZA(),e.TgZ(8,"ion-label",13),e._uU(9,"Estado"),e.qZA()(),e.YNc(10,C,9,11,"ion-item",14),e.qZA()),2&o){const t=e.oxw(2);e.Tol(t.isDarkMode?"dark-list":""),e.xp6(10),e.Q6J("ngForOf",t.reservasFiltradas)}}function O(o,r){1&o&&(e.TgZ(0,"div",18),e._uU(1," No hay reservas disponibles. "),e.qZA())}function F(o,r){if(1&o&&(e.TgZ(0,"ion-content")(1,"ion-list")(2,"ion-item",8),e._UZ(3,"ion-icon",9),e.TgZ(4,"span",10),e._uU(5,"Reservar"),e.qZA()()(),e.YNc(6,b,11,3,"ion-list",0)(7,O,2,0,"div",11),e.qZA()),2&o){const t=e.oxw();e.Tol(t.isDarkMode?"dark-theme":""),e.xp6(),e.Tol(t.isDarkMode?"dark-list":""),e.xp6(5),e.Q6J("ngIf",t.reservasFiltradas&&t.reservasFiltradas.length>0),e.xp6(),e.Q6J("ngIf",!t.reservasFiltradas||0===t.reservasFiltradas.length)}}const R=[{path:"",component:(()=>{var o;class r{constructor(n,i,c,l,u,k){this.router=n,this.authServiceCli=i,this.clienteService=c,this.reservasService=l,this.menuService=u,this.themeService=k,this.coloresFilas=["#FFECBA","#FFFFFF"],this.getUserRole(),this.isDarkMode=this.themeService.isDarkTheme()}ngOnInit(){this.componentes=this.menuService.getMenuOpts(),this.obtenerDatosUsuario()}obtenerDatosUsuario(){const n=localStorage.getItem("cliente");if(!n)return void console.error("Usuario no encontrado en el almacenamiento local");const c=JSON.parse(n).email;this.clienteService.getUserByEmail(c).subscribe(l=>{l&&200===l.code&&l.data?(this.clienteData=l.data,this.getReservas(l.data.id_cliente)):console.error("No se pudieron obtener los datos del usuario:",l.texto)},l=>{console.error("Error al obtener datos del usuario:",l)})}getReservas(n){this.reservasService.getReservas().subscribe(i=>{this.reservas=i.filter(c=>c.id_cliente===n.toString()),this.reservasFiltradas=[...this.reservas]},i=>{console.error("Error al obtener las reservas:",i)})}formatFechaHora(n){var i;const c=new g.uU("en-US");return n&&!isNaN(new Date(n).getTime())&&null!==(i=c.transform(n,"dd/MM/yyyy HH:mm"))&&void 0!==i?i:""}getEstadoColor(n){switch(n){case"pendiente":default:return"color-naranja";case"aceptada":return"color-verde";case"cancelada":return"color-rojo"}}getUserRole(){this.rol=this.authServiceCli.getUserRole(),"cliente"!==this.rol&&(console.error("Usuario con rol",this.rol,"no tiene permiso para acceder a esta opci\xf3n."),this.authServiceCli.logout().subscribe(()=>{localStorage.removeItem("role"),localStorage.removeItem("cliente"),this.router.navigate(["/inicio"])},n=>{console.error("Error al cerrar sesi\xf3n:",n)}))}toggleDarkMode(){this.isDarkMode=!this.isDarkMode,this.themeService.setDarkTheme(this.isDarkMode)}cerrarSesion(){this.authServiceCli.logout().subscribe()}}return(o=r).\u0275fac=function(n){return new(n||o)(e.Y36(d.F0),e.Y36(m.S),e.Y36(h.Y),e.Y36(_.U),e.Y36(p.h),e.Y36(P.f))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-gestion-reservascli"]],decls:2,vars:2,consts:[[3,"class",4,"ngIf"],["slot","start"],["defaultHref","/homecli",2,"--color","#ff830f"],[2,"font-size","20px"],["slot","end"],[3,"click"],[1,"icon-with-margin",2,"color","#ff830f","font-size","24px",3,"name"],["name","log-out-outline","size","large",1,"color-salir"],["href","/reservascli",1,"custom-item",2,"font-size","1.2rem"],["name","book-outline","color","primary",1,"ion-padding-end"],[1,"text-with-margin"],["style","margin-left: 20px;font-size: 20px;font-weight: bold;color: #ff830f;",4,"ngIf"],[1,"header-row",2,"font-size","5.8rem"],[1,"columna",2,"font-size","0.9rem"],[3,"ngClass","background-color",4,"ngFor","ngForOf"],[3,"ngClass"],[1,"columna"],[3,"name"],[2,"margin-left","20px","font-size","20px","font-weight","bold","color","#ff830f"]],template:function(n,i){1&n&&e.YNc(0,M,11,3,"ion-header",0)(1,F,8,6,"ion-content",0),2&n&&(e.Q6J("ngIf","cliente"===i.rol),e.xp6(),e.Q6J("ngIf","cliente"===i.rol))},dependencies:[g.mk,g.sg,g.O5,a.YG,a.Sm,a.W2,a.Gu,a.gu,a.Ie,a.Q$,a.q_,a.wd,a.sr,a.oU],styles:['@charset "UTF-8";[_ngcontent-%COMP%]:root{--color-fila-1: #FFECBA;--color-fila-2: #FFFFFF}.dark-list[_ngcontent-%COMP%]{background-color:#444852;color:#fff}ion-list[_ngcontent-%COMP%]{margin:15px 10px 20px!important}ion-toolbar[_ngcontent-%COMP%], ion-title[_ngcontent-%COMP%], ion-col[_ngcontent-%COMP%]{font-size:2vw}ion-title[_ngcontent-%COMP%]{text-align:center}.color-salir[_ngcontent-%COMP%]{color:#ff830f}.color-naranja[_ngcontent-%COMP%]{color:orange}.color-verde[_ngcontent-%COMP%]{color:green}.color-rojo[_ngcontent-%COMP%]{color:red}.iconos[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.5vw;color:#ff830f;overflow:visible}.tabla-centrada[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;width:100%}.fila-bordes[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #E0E0E0;border-radius:10px;overflow:hidden;display:flex;justify-content:space-between;align-items:center;width:90vw;color:#000!important;margin-bottom:8px}.encabezado-naranja[_ngcontent-%COMP%]{color:#ff830f!important}.columna[_ngcontent-%COMP%]{flex:1;text-align:center;padding:10px}.iconos[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center;flex:1}.iconos[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.5vw}.dark-theme[_ngcontent-%COMP%]{filter:none}@media screen and (max-width: 768px){ion-title.tabla-centrada[_ngcontent-%COMP%]{font-size:3vw}.columna[_ngcontent-%COMP%], .iconos[_ngcontent-%COMP%]{flex:1;font-size:2.5vw}ion-icon[_ngcontent-%COMP%]{font-size:4vw}}.estado-reserva-dot[_ngcontent-%COMP%]{width:20px;height:20px;background-size:cover;border-radius:50%}.header-row[_ngcontent-%COMP%]{font-weight:700}.data-row[_ngcontent-%COMP%]{font-size:2rem;background-color:var(--color-fila-1)}.dark-theme[_ngcontent-%COMP%]   .data-row[_ngcontent-%COMP%]{background-color:var(--color-fila-2)}']}),r})()}];let Z=(()=>{var o;class r{}return(o=r).\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[d.Bz.forChild(R),d.Bz]}),r})(),T=(()=>{var o;class r{}return(o=r).\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[g.ez,v.u5,a.Pc,Z]}),r})()}}]);