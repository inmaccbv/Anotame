"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5628],{5628:(y,d,l)=>{l.r(d),l.d(d,{RegistroempresaPageModule:()=>U});var g=l(6814),r=l(6223),n=l(878),m=l(9634),c=l(5861),e=l(9212),Z=l(5038),v=l(4484),b=l(2333);function h(o,a){1&o&&(e.TgZ(0,"ion-label",22),e._uU(1,"Cif empresa requerido"),e.qZA())}function P(o,a){1&o&&(e.TgZ(0,"ion-label",22),e._uU(1,"Cif no valido"),e.qZA())}function _(o,a){1&o&&(e.TgZ(0,"ion-label",22),e._uU(1,"Nombre empresa requerido"),e.qZA())}function I(o,a){1&o&&(e.TgZ(0,"ion-label",22),e._uU(1,"Direccion requerido"),e.qZA())}function A(o,a){if(1&o&&(e.TgZ(0,"ion-select-option",23),e._uU(1),e.qZA()),2&o){const u=a.$implicit;e.Q6J("value",u.provincia),e.xp6(),e.Oqu(u.provincia)}}function T(o,a){1&o&&(e.TgZ(0,"ion-label",22),e._uU(1,"Ciudad requerida"),e.qZA())}function q(o,a){1&o&&(e.TgZ(0,"ion-label",22),e._uU(1,"Codigo Postal requerido"),e.qZA())}const R=[{path:"",component:(()=>{var o;class a{constructor(t,i,s,p,f,C){this.formBuilder=t,this.alertController=i,this.router=s,this.empresaRegis=p,this.provinciasService=f,this.authService=C,this.submitted=!1,this.empresaForm=this.formBuilder.group({cif:new r.NI("",r.kI.compose([r.kI.required,r.kI.pattern("[A-Za-z]{1}[0-9]{8}")])),empresa:new r.NI("",r.kI.compose([r.kI.required])),direccion:new r.NI("",r.kI.compose([r.kI.required])),provincia:new r.NI("",r.kI.compose([r.kI.required])),ciudad:new r.NI("",r.kI.compose([r.kI.required])),cPostal:new r.NI("",r.kI.compose([r.kI.required])),tipoLocal:new r.NI("",r.kI.compose([r.kI.required]))})}ngOnInit(){this.getProvincias()}get f(){return this.empresaForm.controls}getProvincias(){var t=this;this.provinciasService.getProvincias().subscribe(function(){var i=(0,c.Z)(function*(s){t.provincias=s});return function(s){return i.apply(this,arguments)}}())}enviarDatos(){var t=this;return(0,c.Z)(function*(){if(t.submitted=!0,!t.empresaForm.invalid)try{const i=yield t.empresaRegis.registroEmpresa(t.empresaForm.value).toPromise();console.log("Respuesta del servidor:",i),t.empresas=i,"NO"===t.empresas.authorized?t.mostrarAlertaNO("Error","CIF ya registrado"):(localStorage.setItem("empresa",t.empresas.data.empresa),t.mostrarAlertaOK("Enhorabuena","Empresa registrada correctamente"),t.router.navigate(["/registro"]))}catch(i){console.error("Error en la solicitud:",i),t.mostrarAlertaNO("Error","Error al registrar empresa")}})()}mostrarAlertaOK(t,i){var s=this;return(0,c.Z)(function*(){yield(yield s.alertController.create({header:t,message:i,buttons:[{text:"OK",handler:()=>{const f=localStorage.getItem("empresa");console.log("Nombre de la empresa en localStorage:",f),window.location.href="/registro"}}],cssClass:"custom-alert-header"})).present()})()}mostrarAlertaNO(t,i){var s=this;return(0,c.Z)(function*(){yield(yield s.alertController.create({header:t,message:i,buttons:["OK"],cssClass:"custom-alert-header"})).present()})()}}return(o=a).\u0275fac=function(t){return new(t||o)(e.Y36(r.qu),e.Y36(n.Br),e.Y36(m.F0),e.Y36(Z.P),e.Y36(v.g),e.Y36(b.e))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-registroempresa"]],decls:58,vars:8,consts:[["slot","start"],["defaultHref","/registration",2,"--color","#ff830f"],[2,"margin-right","30px"],[3,"formGroup","ngSubmit"],["lines","full"],["position","floating"],["type","text","formControlName","cif"],["class","errormessage","position","floating",4,"ngIf"],["type","text","formControlName","empresa"],["type","text","formControlName","direccion"],["type","select","formControlName","provincia"],[3,"value",4,"ngFor","ngForOf"],["type","text","formControlName","ciudad"],["type","text","formControlName","cPostal"],["formControlName","tipoLocal"],["value","Italiano"],["value","Mexicano"],["value","Asi\xe1tico"],["value","Mediterr\xe1neo"],["value","Indio"],[1,"custom-button",3,"click"],["href","/registro",2,"color","#fff"],["position","floating",1,"errormessage"],[3,"value"]],template:function(t,i){1&t&&(e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),e._UZ(3,"ion-back-button",1),e.qZA(),e.TgZ(4,"ion-title",2),e._uU(5,"Registro Empresa"),e.qZA()()(),e.TgZ(6,"ion-content")(7,"form",3),e.NdJ("ngSubmit",function(){return i.enviarDatos()}),e.TgZ(8,"ion-item",4)(9,"ion-label",5),e._uU(10,"CIF Empresa"),e.qZA(),e._UZ(11,"ion-input",6),e.qZA(),e.YNc(12,h,2,0,"ion-label",7)(13,P,2,0,"ion-label",7),e.TgZ(14,"ion-item",4)(15,"ion-label",5),e._uU(16,"Nombre Empresa"),e.qZA(),e._UZ(17,"ion-input",8),e.qZA(),e.YNc(18,_,2,0,"ion-label",7),e.TgZ(19,"ion-item",4)(20,"ion-label",5),e._uU(21,"Direccion"),e.qZA(),e._UZ(22,"ion-input",9),e.qZA(),e.YNc(23,I,2,0,"ion-label",7),e.TgZ(24,"ion-item",4)(25,"ion-label",5),e._uU(26,"Provincia"),e.qZA(),e.TgZ(27,"ion-select",10),e.YNc(28,A,2,2,"ion-select-option",11),e.qZA()(),e.TgZ(29,"ion-item",4)(30,"ion-label",5),e._uU(31,"Ciudad"),e.qZA(),e._UZ(32,"ion-input",12),e.qZA(),e.YNc(33,T,2,0,"ion-label",7),e.TgZ(34,"ion-item",4)(35,"ion-label",5),e._uU(36,"Codigo Postal"),e.qZA(),e._UZ(37,"ion-input",13),e.qZA(),e.YNc(38,q,2,0,"ion-label",7),e.TgZ(39,"ion-item",4)(40,"ion-label",5),e._uU(41,"Tipo de Restaurante"),e.qZA(),e.TgZ(42,"ion-select",14)(43,"ion-select-option",15),e._uU(44,"Italiano"),e.qZA(),e.TgZ(45,"ion-select-option",16),e._uU(46,"Mexicano"),e.qZA(),e.TgZ(47,"ion-select-option",17),e._uU(48,"Asi\xe1tico"),e.qZA(),e.TgZ(49,"ion-select-option",18),e._uU(50,"Mediterr\xe1neo"),e.qZA(),e.TgZ(51,"ion-select-option",19),e._uU(52,"Indio"),e.qZA()()(),e.TgZ(53,"ion-row")(54,"ion-col")(55,"ion-button",20),e.NdJ("click",function(){return i.enviarDatos()}),e.TgZ(56,"a",21),e._uU(57," Registro Empresa "),e.qZA()()()()()()),2&t&&(e.xp6(7),e.Q6J("formGroup",i.empresaForm),e.xp6(5),e.Q6J("ngIf",null!=i.f.cif.getError("required")),e.xp6(),e.Q6J("ngIf",null!=i.f.cif.getError("pattern")),e.xp6(5),e.Q6J("ngIf",null!=i.f.empresa.getError("required")),e.xp6(5),e.Q6J("ngIf",null!=i.f.direccion.getError("required")),e.xp6(5),e.Q6J("ngForOf",i.provincias),e.xp6(5),e.Q6J("ngIf",null!=i.f.ciudad.getError("required")),e.xp6(5),e.Q6J("ngIf",null!=i.f.cPostal.getError("required")))},dependencies:[g.sg,g.O5,r._Y,r.JJ,r.JL,n.YG,n.Sm,n.wI,n.W2,n.Gu,n.pK,n.Ie,n.Q$,n.Nd,n.t9,n.n0,n.wd,n.sr,n.QI,n.j9,n.oU,r.sg,r.u],styles:['@charset "UTF-8";form[_ngcontent-%COMP%]{margin:20px}p[_ngcontent-%COMP%]{font-family:Lato}input.ng-touched.ng-invalid[_ngcontent-%COMP%]{border:1px solid red}ion-button.custom-button[_ngcontent-%COMP%]{background-color:#ff830f;color:#fff;border-radius:10px}.color-salir[_ngcontent-%COMP%]{color:#ff830f}ion-title[_ngcontent-%COMP%]{text-align:center}']}),a})()}];let N=(()=>{var o;class a{}return(o=a).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[m.Bz.forChild(R),m.Bz]}),a})(),U=(()=>{var o;class a{}return(o=a).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[g.ez,r.u5,n.Pc,r.UX,N]}),a})()}}]);