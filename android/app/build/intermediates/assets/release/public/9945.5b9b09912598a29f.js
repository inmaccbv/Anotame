"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9945],{9945:(T,g,i)=>{i.r(g),i.d(g,{CartacliPageModule:()=>M});var l=i(6814),d=i(6223),r=i(878),s=i(9634),e=i(9212),m=i(3458),p=i(1660),u=i(3102),h=i(2471);function f(o,n){if(1&o){const a=e.EpF();e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",2),e._UZ(3,"ion-back-button",3),e.qZA(),e.TgZ(4,"ion-title",4),e._uU(5,"Carta"),e.qZA(),e.TgZ(6,"ion-buttons",5)(7,"ion-button",6),e.NdJ("click",function(){e.CHM(a);const c=e.oxw();return e.KtG(c.toggleDarkMode())}),e._UZ(8,"ion-icon",7),e.qZA(),e.TgZ(9,"ion-button",6),e.NdJ("click",function(){e.CHM(a);const c=e.oxw();return e.KtG(c.cerrarSesion())}),e._UZ(10,"ion-icon",8),e.qZA()()()()}if(2&o){const a=e.oxw();e.xp6(8),e.Q6J("name",a.isDarkMode?"sunny-outline":"moon-outline")}}function C(o,n){if(1&o&&(e.TgZ(0,"ion-card",14),e._UZ(1,"img",15),e.qZA()),2&o){const a=n.$implicit,t=e.oxw(2);e.xp6(),e.s9C("alt",a.carta_img),e.Q6J("src",t.obtenerUrlImg(a),e.LSH)}}function x(o,n){if(1&o&&(e.TgZ(0,"ion-content",9),e._UZ(1,"input",10,11),e.TgZ(3,"div",12),e.YNc(4,C,2,2,"ion-card",13),e.qZA()()),2&o){const a=e.oxw();e.xp6(),e.Q6J("value",a.idEmpresa),e.xp6(3),e.Q6J("ngForOf",a.cartas)}}const v=[{path:"",component:(()=>{var o;class n{constructor(t,c,_,S,b){this.router=t,this.cartaUploadService=c,this.authServiceCliente=_,this.menuCli=S,this.themeService=b,this.BASE_RUTA="http://localhost/anotame/APIANOTAME/public/uploads",this.selectedFile=null,this.isDarkMode=!1,this.isDarkMode=this.themeService.isDarkTheme()}ngOnInit(){this.componentes=this.menuCli.getMenuOptsCli(),this.getUserRole(),this.isDarkMode=this.themeService.isDarkTheme();const t=localStorage.getItem("id_empresa");this.idEmpresa=t?parseInt(t,10):null,this.idEmpresa&&this.getImg()}getUserRole(){this.rol=this.authServiceCliente.getUserRole(),"cliente"!==this.rol&&(console.error("Cliente con rol",this.rol,"no tiene permiso para acceder a esta opci\xf3n."),this.authServiceCliente.logout().subscribe(()=>{localStorage.removeItem("role"),localStorage.removeItem("cliente"),this.router.navigate(["/inicio"])},t=>{console.error("Error al cerrar sesi\xf3n:",t)}))}onFileSelected(t){this.selectedFile=t.target.files[0]}getImg(){null!==this.idEmpresa&&this.cartaUploadService.getCartasByEmpresa(this.idEmpresa).subscribe(t=>{"code"in t?200===t.code?"data"in t?(this.cartas=t.data,this.cartasFiltradas=t.data,console.log("Cartas obtenidas:",this.cartas)):console.error('Error en la respuesta: Propiedad "data" no encontrada.'):console.error("Error en la respuesta:",t.cartas):console.error('Error en la respuesta: Propiedad "code" no encontrada.')},t=>{console.error("Error al obtener las cartas:",t)})}obtenerUrlImg(t){return t&&t.carta_img?`${this.BASE_RUTA}/${t.carta_img}`:(console.error("La propiedad carta_img es undefined en la carta:",t),"")}toggleDarkMode(){this.isDarkMode=!this.isDarkMode,this.themeService.setDarkTheme(this.isDarkMode)}cerrarSesion(){this.authServiceCliente.logout().subscribe()}}return(o=n).\u0275fac=function(t){return new(t||o)(e.Y36(s.F0),e.Y36(m.A),e.Y36(p.S),e.Y36(u.g),e.Y36(h.f))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-cartacli"]],decls:2,vars:2,consts:[[4,"ngIf"],["class","center-content",4,"ngIf"],["slot","start"],["defaultHref","/homecli",2,"--color","#ff830f"],["color","primary"],["slot","end"],[3,"click"],[2,"color","#ff830f","font-size","24px",3,"name"],["name","log-out-outline","size","large",1,"color-salir"],[1,"center-content"],["type","hidden",3,"value"],["idEmpresaInput",""],[1,"gallery-container",2,"margin-left","10px","margin-right","25px"],["class","card-container",4,"ngFor","ngForOf"],[1,"card-container"],[2,"width","100%",3,"src","alt"]],template:function(t,c){1&t&&e.YNc(0,f,11,1,"ion-header",0)(1,x,5,2,"ion-content",1),2&t&&(e.Q6J("ngIf","cliente"===c.rol),e.xp6(),e.Q6J("ngIf","cliente"===c.rol))},dependencies:[l.sg,l.O5,r.YG,r.Sm,r.PM,r.W2,r.Gu,r.gu,r.wd,r.sr,r.oU],styles:['@charset "UTF-8";ion-content[_ngcontent-%COMP%]{margin:30px 40px 20px 35px!important}.gallery-container[_ngcontent-%COMP%]{margin-top:30px!important;margin-bottom:20px;margin-left:35px!important;margin-right:40px!important}ion-title[_ngcontent-%COMP%]{text-align:center}label[_ngcontent-%COMP%]{font-size:large;color:#ff830f;font-weight:700;margin-left:2px}.color-salir[_ngcontent-%COMP%]{color:#ff830f}.upload-row[_ngcontent-%COMP%]{display:flex;align-items:center}.upload-button[_ngcontent-%COMP%]{width:120px}.card-container[_ngcontent-%COMP%]{width:100%;max-width:400px;margin-bottom:50px;position:relative;text-align:center;overflow:hidden}.card-image[_ngcontent-%COMP%]{width:calc(100% - 12px);height:auto;object-fit:contain;margin:10px auto;max-height:300px}ion-card-header[_ngcontent-%COMP%]{text-align:center;overflow:visible;display:flex;justify-content:space-between;align-items:center;white-space:nowrap;margin-top:5px;margin-bottom:5px}.card-title[_ngcontent-%COMP%]{font-size:18px;margin-left:auto;margin-right:auto;margin-bottom:2px}.trash-icon[_ngcontent-%COMP%]{cursor:pointer;margin-left:5px}']}),n})()}];let P=(()=>{var o;class n{}return(o=n).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[s.Bz.forChild(v),s.Bz]}),n})(),M=(()=>{var o;class n{}return(o=n).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[l.ez,d.u5,r.Pc,P]}),n})()}}]);