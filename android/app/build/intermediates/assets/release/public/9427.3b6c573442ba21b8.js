"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9427],{9427:(Z,d,o)=>{o.r(d),o.d(d,{MenuImgcliPageModule:()=>E});var l=o(6814),h=o(6223),a=o(878),c=o(9634),p=o(9397),f=o(6306),M=o(2096),e=o(9212),v=o(1660),x=o(2471),P=o(828),I=o(173);function S(n,s){if(1&n){const i=e.EpF();e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",2),e._UZ(3,"ion-back-button",3),e.qZA(),e.TgZ(4,"ion-title",4),e._uU(5,"Men\xfa"),e.qZA(),e.TgZ(6,"ion-buttons",5)(7,"ion-button",6),e.NdJ("click",function(){e.CHM(i);const r=e.oxw();return e.KtG(r.toggleDarkMode())}),e._UZ(8,"ion-icon",7),e.qZA(),e.TgZ(9,"ion-button",6),e.NdJ("click",function(){e.CHM(i);const r=e.oxw();return e.KtG(r.cerrarSesion())}),e._UZ(10,"ion-icon",8),e.qZA()()()()}if(2&n){const i=e.oxw();e.xp6(8),e.Q6J("name",i.isDarkMode?"sunny-outline":"moon-outline")}}const b=n=>({color:n});function D(n,s){if(1&n&&(e.TgZ(0,"ion-card",12),e._UZ(1,"img",13),e.TgZ(2,"ion-card-header")(3,"ion-card-title",14),e._uU(4),e.qZA()()()),2&n){const i=s.$implicit,t=e.oxw(2);e.xp6(),e.s9C("alt",i.menu_img),e.Q6J("src",t.obtenerUrlImg(i),e.LSH),e.xp6(2),e.Q6J("ngStyle",e.VKq(4,b,t.isDarkMode?"white":"inherit")),e.xp6(),e.hij(" ",i.dia?""+i.dia:"D\xeda no disponible"," ")}}function C(n,s){if(1&n&&(e.TgZ(0,"ion-content",9)(1,"div",10),e.YNc(2,D,5,6,"ion-card",11),e.qZA()()),2&n){const i=e.oxw();e.xp6(2),e.Q6J("ngForOf",i.menus)}}const y=[{path:"",component:(()=>{var n;class s{constructor(t,r,g,u,m){this.router=t,this.authServiceCliente=r,this.themeService=g,this.diasService=u,this.menuUploadService=m,this.BASE_RUTA="http://localhost/anotame/APIANOTAME/public/uploads",this.selectedFile=null,this.availableDays=[],this.isDarkMode=!1,this.isDarkMode=this.themeService.isDarkTheme()}ngOnInit(){this.getUserRole(),this.isDarkMode=this.themeService.isDarkTheme(),this.getDias().subscribe(r=>{r&&this.getImg()});const t=localStorage.getItem("id_empresa");this.idEmpresa=t?parseInt(t,10):null,this.idEmpresa&&this.getImg()}getDias(){return this.diasService.getDias().pipe((0,p.b)(t=>{this.dias=t,this.availableDays=this.dias.map(r=>r.dia)}),(0,f.K)(t=>(console.error("Error al obtener los d\xedas:",t),(0,M.of)(null))))}getUserRole(){this.rol=this.authServiceCliente.getUserRole(),"cliente"!==this.rol&&(console.error("Cliente con rol",this.rol,"no tiene permiso para acceder a esta opci\xf3n."),this.authServiceCliente.logout().subscribe(()=>{localStorage.removeItem("role"),localStorage.removeItem("usuario"),this.router.navigate(["/inicio"])},t=>{console.error("Error al cerrar sesi\xf3n:",t)}))}onFileSelected(t){this.selectedFile=t.target.files[0]}getImg(){null!==this.idEmpresa&&this.menuUploadService.getMenusByEmpresa(this.idEmpresa).subscribe(t=>{"code"in t?200===t.code?"data"in t?(this.menus=t.data,this.menus.sort((r,g)=>this.availableDays.indexOf(r.dia)-this.availableDays.indexOf(g.dia)),console.log("Men\xfas obtenidos:",this.menus)):console.error('Error en la respuesta: Propiedad "data" no encontrada.'):console.error("Error en la respuesta:",t.menus):console.error('Error en la respuesta: Propiedad "code" no encontrada.')},t=>{console.error("Error al obtener los men\xfas:",t)})}obtenerUrlImg(t){return t&&t.menu_img?`${this.BASE_RUTA}/${t.menu_img}`:(console.error("La propiedad menu_img es undefined en el men\xfa:",t),"")}toggleDarkMode(){this.isDarkMode=!this.isDarkMode,this.themeService.setDarkTheme(this.isDarkMode)}cerrarSesion(){this.authServiceCliente.logout().subscribe()}}return(n=s).\u0275fac=function(t){return new(t||n)(e.Y36(c.F0),e.Y36(v.S),e.Y36(x.f),e.Y36(P.z),e.Y36(I.c))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-menu-imgcli"]],decls:2,vars:2,consts:[[4,"ngIf"],["class","center-content",4,"ngIf"],["slot","start"],["defaultHref","/homecli",2,"--color","#ff830f"],["color","primary"],["slot","end"],[3,"click"],[2,"color","#ff830f","font-size","24px",3,"name"],["name","log-out-outline","size","large",1,"color-salir"],[1,"center-content"],[1,"gallery-container",2,"margin-left","10px","margin-right","25px"],["class","card-container",4,"ngFor","ngForOf"],[1,"card-container"],[2,"width","100%",3,"src","alt"],[1,"card-title",3,"ngStyle"]],template:function(t,r){1&t&&e.YNc(0,S,11,1,"ion-header",0)(1,C,3,1,"ion-content",1),2&t&&(e.Q6J("ngIf","cliente"===r.rol),e.xp6(),e.Q6J("ngIf","cliente"===r.rol))},dependencies:[l.sg,l.O5,l.PC,a.YG,a.Sm,a.PM,a.Zi,a.Dq,a.W2,a.Gu,a.gu,a.wd,a.sr,a.oU],styles:['@charset "UTF-8";ion-title[_ngcontent-%COMP%]{text-align:center}label[_ngcontent-%COMP%]{font-size:large;color:#ff830f;font-weight:700;margin-left:2px}.color-salir[_ngcontent-%COMP%]{color:#ff830f}.upload-row[_ngcontent-%COMP%]{display:flex;align-items:center}.upload-button[_ngcontent-%COMP%]{width:120px}.card-container[_ngcontent-%COMP%]{width:100%;max-width:400px;margin-bottom:50px;position:relative;text-align:center;overflow:hidden}.card-image[_ngcontent-%COMP%]{width:calc(100% - 12px);height:auto;object-fit:contain;margin:10px auto;max-height:300px}ion-card-header[_ngcontent-%COMP%]{text-align:center;overflow:visible;display:flex;justify-content:space-between;align-items:center;white-space:nowrap;margin-top:5px;margin-bottom:5px}.card-title[_ngcontent-%COMP%]{font-size:18px;margin-left:auto;margin-right:auto;margin-bottom:2px}.trash-icon[_ngcontent-%COMP%]{cursor:pointer;margin-left:5px}']}),s})()}];let T=(()=>{var n;class s{}return(n=s).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[c.Bz.forChild(y),c.Bz]}),s})(),E=(()=>{var n;class s{}return(n=s).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[l.ez,h.u5,a.Pc,T]}),s})()}}]);