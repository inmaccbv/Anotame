"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6493],{6493:(J,u,c)=>{c.r(u),c.d(u,{SeleccionEmpresaPageModule:()=>b});var p=c(6814),g=c(6223),s=c(878),m=c(9634),e=c(9212),d=c(1660),h=c(3102),f=c(5038),_=c(2333),v=c(2471),P=c(4484);function C(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",24)(3,"a",25),e._UZ(4,"img",26),e.qZA()(),e.TgZ(5,"ion-title",27),e._uU(6,"An\xf3tame"),e.qZA(),e.TgZ(7,"ion-buttons",28)(8,"ion-button",29),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.cerrarSesion())}),e._UZ(9,"ion-icon",30),e.qZA()()()()}if(2&n){const t=e.oxw();e.Tol(t.isDarkMode?"dark-theme":""),e.xp6(5),e.Udp("color",t.isDarkMode?"#ff830f":"")}}function M(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"ion-button",31),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.borrarFiltro())}),e._UZ(1,"ion-icon",32),e.qZA()}}function E(n,a){if(1&n&&(e.TgZ(0,"ion-select-option",33),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t.provincia),e.xp6(),e.hij(" ",t.provincia," ")}}function S(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"ion-button",31),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.borrarFiltro())}),e._UZ(1,"ion-icon",32),e.qZA()}}function x(n,a){if(1&n&&(e.TgZ(0,"ion-select-option",33),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t.id_empresa),e.xp6(),e.hij(" ",t.empresa," ")}}const T=[{path:"",component:(()=>{var n;class a{constructor(i,o,l,r,F,A,O){this.router=i,this.authServiceCli=o,this.menuCli=l,this.empresaService=r,this.authService=F,this.themeService=A,this.provinciasService=O,this.empresasFiltradas=[],this.provincias=[],this.filtroTipoLocal="",this.filtroProvincia="",this.filtroCodigoPostal="",this.filtroNombreRestaurante="",this.getUserRole(),this.isDarkMode=this.themeService.isDarkTheme()}ngOnInit(){this.componentes=this.menuCli.getMenuOptsCli(),this.getEmpresas(),this.getProvincias(),this.aplicarFiltros(),this.idEmpresa=this.authService.getIdEmpresa()}seleccionarEmpresa(i){const o=i.detail.value;if(o){const l=o.toString();this.empresaService.setEmpresaSeleccionada(l).subscribe(r=>{this.empresaService.empresaSeleccionada=r,this.redirigirYAlmacenarIdEmpresa(l)},r=>{console.error("Error al seleccionar la empresa:",r)})}else console.error("ID de empresa no v\xe1lido")}redirigirYAlmacenarIdEmpresa(i){this.router.navigate(["/homecli"]),localStorage.setItem("id_empresa",i)}redirigirYAlmacenar(){const i=this.idEmpresa;if(i){const o=i.toString();this.redirigirYAlmacenarIdEmpresa(o)}}getEmpresas(){this.empresaService.getEmpresas().subscribe(i=>{console.log("Empresas recibidas:",i),this.empresas=Object.values(i),this.empresasFiltradas=this.empresas},i=>{console.error("Error al obtener empresas:",i)})}getProvincias(){this.provinciasService.getProvincias().subscribe(i=>{this.provincias=Object.values(i)},i=>{console.error("Error al obtener provincias:",i)})}aplicarFiltros(){this.empresas&&(this.empresasFiltradas=this.empresas.filter(i=>(""===this.filtroTipoLocal||this.pasaFiltroTipoLocal(i))&&(""===this.filtroProvincia||this.pasaFiltroProvincia(i))&&(""===this.filtroCodigoPostal||this.pasaFiltroCodigoPostal(i))&&(""===this.filtroNombreRestaurante||this.pasaFiltroNombreRestaurante(i))))}pasaFiltroTipoLocal(i){return i.tipoLocal===this.filtroTipoLocal}pasaFiltroProvincia(i){return i.provincia===this.filtroProvincia}pasaFiltroCodigoPostal(i){return i.cPostal.includes(this.filtroCodigoPostal)}pasaFiltroNombreRestaurante(i){return i.empresa.includes(this.filtroNombreRestaurante)}borrarFiltro(){this.filtroTipoLocal="",this.filtroProvincia="",this.aplicarFiltros()}getUserRole(){this.rol=this.authServiceCli.getUserRole(),"cliente"!==this.rol&&(console.error("Cliente con rol",this.rol,"no tiene permiso para acceder a esta opci\xf3n."),this.authServiceCli.logout().subscribe(()=>{localStorage.removeItem("role"),localStorage.removeItem("usuario"),this.router.navigate(["/inicio"])},i=>{console.error("Error al cerrar sesi\xf3n:",i)}))}toggleDarkMode(){this.isDarkMode=!this.isDarkMode,this.themeService.setDarkTheme(this.isDarkMode)}cerrarSesion(){this.authServiceCli.logout().subscribe()}}return(n=a).\u0275fac=function(i){return new(i||n)(e.Y36(m.F0),e.Y36(d.S),e.Y36(h.g),e.Y36(f.P),e.Y36(_.e),e.Y36(v.f),e.Y36(P.g))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-seleccion-empresa"]],decls:37,vars:11,consts:[[3,"class",4,"ngIf"],[3,"fullscreen"],[1,"filters-toolbar",2,"margin-top","40px"],[1,"filter-buttons"],[2,"display","flex","flex-direction","column","gap","10px"],[1,"filter-item"],["name","restaurant-outline","slot","start",2,"margin-right","8px"],["placeholder","Tipo restaurante",1,"filter-select",3,"ngModel","ngModelChange","ionChange"],["value","Italiano"],["value","Mexicano"],["value","Asi\xe1tico"],["value","Mediterr\xe1neo"],["value","Indio"],["fill","clear",3,"click",4,"ngIf"],["name","location-outline","slot","start",2,"margin-right","8px"],["placeholder","Provincia",1,"filter-select",3,"ngModel","ngModelChange","ionChange"],[3,"value",4,"ngFor","ngForOf"],[2,"display","flex","flex-direction","row","gap","5px","align-items","center"],["name","business-outline",2,"color","#ff830f","margin-left","48px"],["placeholder","Restaurante",1,"filter-input",2,"width","150px",3,"ngModel","ngModelChange","ionChange"],["name","map-outline",2,"color","#ff830f","margin-right","2px"],["placeholder","C.P",1,"filter-input",3,"ngModel","ngModelChange","ionChange"],["placeholder","Selecciona un restaurante",1,"company-select",3,"ngModel","ngModelChange","ionChange"],[1,"redirect-button",3,"click"],["slot","start"],["href","/inicio"],["src","./../../../assets/img/ic-inicio.png",2,"width","84px"],[2,"margin-left","28px"],["slot","end"],[3,"click"],["name","log-out-outline","size","large",1,"color-salir"],["fill","clear",3,"click"],["name","close-circle-outline"],[3,"value"]],template:function(i,o){1&i&&(e.YNc(0,C,10,4,"ion-header",0),e.TgZ(1,"ion-content",1)(2,"ion-toolbar",2)(3,"ion-buttons",3)(4,"label"),e._uU(5,"Filtrar por.."),e.qZA(),e.TgZ(6,"div",4)(7,"ion-item",5),e._UZ(8,"ion-icon",6),e.TgZ(9,"ion-select",7),e.NdJ("ngModelChange",function(r){return o.filtroTipoLocal=r})("ionChange",function(){return o.aplicarFiltros()}),e.TgZ(10,"ion-select-option",8),e._uU(11,"Italiano"),e.qZA(),e.TgZ(12,"ion-select-option",9),e._uU(13,"Mexicano"),e.qZA(),e.TgZ(14,"ion-select-option",10),e._uU(15,"Asi\xe1tico"),e.qZA(),e.TgZ(16,"ion-select-option",11),e._uU(17,"Mediterr\xe1neo"),e.qZA(),e.TgZ(18,"ion-select-option",12),e._uU(19,"Indio"),e.qZA()(),e.YNc(20,M,2,0,"ion-button",13),e.qZA(),e.TgZ(21,"ion-item",5),e._UZ(22,"ion-icon",14),e.TgZ(23,"ion-select",15),e.NdJ("ngModelChange",function(r){return o.filtroProvincia=r})("ionChange",function(){return o.aplicarFiltros()}),e.YNc(24,E,2,2,"ion-select-option",16),e.qZA(),e.YNc(25,S,2,0,"ion-button",13),e.qZA()(),e.TgZ(26,"div",17),e._UZ(27,"ion-icon",18),e.TgZ(28,"ion-item",5)(29,"ion-input",19),e.NdJ("ngModelChange",function(r){return o.filtroNombreRestaurante=r})("ionChange",function(){return o.aplicarFiltros()}),e.qZA()(),e._UZ(30,"ion-icon",20),e.TgZ(31,"ion-item",5)(32,"ion-input",21),e.NdJ("ngModelChange",function(r){return o.filtroCodigoPostal=r})("ionChange",function(){return o.aplicarFiltros()}),e.qZA()()()()(),e.TgZ(33,"ion-select",22),e.NdJ("ngModelChange",function(r){return o.idEmpresa=r})("ionChange",function(r){return o.seleccionarEmpresa(r)}),e.YNc(34,x,2,2,"ion-select-option",16),e.qZA(),e.TgZ(35,"ion-button",23),e.NdJ("click",function(){return o.redirigirYAlmacenar()}),e._uU(36,"Enviar"),e.qZA()()),2&i&&(e.Q6J("ngIf","cliente"===o.rol),e.xp6(),e.Q6J("fullscreen",!0),e.xp6(8),e.Q6J("ngModel",o.filtroTipoLocal),e.xp6(11),e.Q6J("ngIf",o.filtroTipoLocal),e.xp6(3),e.Q6J("ngModel",o.filtroProvincia),e.xp6(),e.Q6J("ngForOf",o.provincias),e.xp6(),e.Q6J("ngIf",o.filtroProvincia),e.xp6(4),e.Q6J("ngModel",o.filtroNombreRestaurante),e.xp6(3),e.Q6J("ngModel",o.filtroCodigoPostal),e.xp6(),e.Q6J("ngModel",o.idEmpresa),e.xp6(),e.Q6J("ngForOf",o.empresasFiltradas))},dependencies:[p.sg,p.O5,g.JJ,g.On,s.YG,s.Sm,s.W2,s.Gu,s.gu,s.pK,s.Ie,s.t9,s.n0,s.wd,s.sr,s.QI,s.j9],styles:['@charset "UTF-8";.filter-buttons[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:10px;padding:10px}.filter-group[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:10px;width:100%}.filter-group[_ngcontent-%COMP%]:nth-child(2){margin-top:10px}.filter-item[_ngcontent-%COMP%]{flex:1;max-width:300px;display:flex;align-items:center}.filter-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{margin-bottom:5px}.filter-item[_ngcontent-%COMP%]   ion-select[_ngcontent-%COMP%], .filter-item[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{width:55px;height:20px;border-radius:20px;margin-bottom:20px;padding:15px;position:relative}.filter-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:5px;font-size:20px;color:#ff830f}ion-icon[_ngcontent-%COMP%]{font-size:20px;color:#ff830f}.filter-input[_ngcontent-%COMP%]{flex:1;max-width:300px;margin-top:20px}.filter-select[_ngcontent-%COMP%]{width:100px!important}.company-select[_ngcontent-%COMP%]{flex:1;max-width:300px;margin-left:10%;padding:15px;overflow-y:auto}.company-select[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:5px;font-size:20px;color:#ff830f}.redirect-button[_ngcontent-%COMP%]{margin-top:10px;margin-left:32%;border-radius:20px;color:#fff;padding:15px 20px;cursor:pointer}label[_ngcontent-%COMP%]{text-align:center;font-size:35px;color:#ff830f;margin-bottom:0}']}),a})()}];let Z=(()=>{var n;class a{}return(n=a).\u0275fac=function(i){return new(i||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[m.Bz.forChild(T),m.Bz]}),a})(),b=(()=>{var n;class a{}return(n=a).\u0275fac=function(i){return new(i||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[p.ez,g.u5,s.Pc,Z]}),a})()}}]);