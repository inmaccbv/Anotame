"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1417],{1417:(F,h,c)=>{c.r(h),c.d(h,{ListacliPageModule:()=>O});var u=c(6814),m=c(6223),l=c(878),d=c(9634),f=c(5861),e=c(9212),p=c(9306),_=c(2333),C=c(1660),v=c(2042),Z=c(2471);function P(t,s){if(1&t){const i=e.EpF();e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",6),e._UZ(3,"ion-back-button",7),e.qZA(),e.TgZ(4,"ion-title",8),e._uU(5,"Lista Clientes"),e.qZA(),e.TgZ(6,"ion-buttons",9)(7,"ion-button",10),e.NdJ("click",function(){e.CHM(i);const o=e.oxw();return e.KtG(o.toggleDarkMode())}),e._UZ(8,"ion-icon",11),e.qZA(),e.TgZ(9,"ion-button",10),e.NdJ("click",function(){e.CHM(i);const o=e.oxw();return e.KtG(o.cerrarSesion())}),e._UZ(10,"ion-icon",12),e.qZA()()()()}if(2&t){const i=e.oxw();e.Tol(i.isDarkMode?"dark-theme":""),e.xp6(8),e.Q6J("name",i.isDarkMode?"sunny-outline":"moon-outline")}}const b=t=>({"background-color":t});function M(t,s){if(1&t){const i=e.EpF();e.TgZ(0,"ion-row",18)(1,"ion-col",19),e._uU(2),e.qZA(),e.TgZ(3,"ion-col",19),e._uU(4),e.qZA(),e.TgZ(5,"ion-col",19),e._uU(6),e.qZA(),e.TgZ(7,"ion-col",19),e._uU(8),e.qZA(),e.TgZ(9,"ion-col",19),e._uU(10),e.qZA(),e.TgZ(11,"ion-col",16)(12,"a",10),e.NdJ("click",function(){const a=e.CHM(i).$implicit,r=e.oxw(2);return e.KtG(r.borrarCliente(a.id_cliente))}),e._UZ(13,"ion-icon",20),e.qZA()()()}if(2&t){const i=s.$implicit,n=s.index,o=e.oxw(2);e.Q6J("ngStyle",e.VKq(6,b,o.coloresFilas[n%o.coloresFilas.length])),e.xp6(2),e.Oqu(i.id_cliente),e.xp6(2),e.Oqu(i.nombre),e.xp6(2),e.Oqu(i.apellido),e.xp6(2),e.Oqu(i.email),e.xp6(2),e.Oqu(i.telf)}}function x(t,s){if(1&t&&(e.TgZ(0,"ion-grid",13)(1,"ion-row",14)(2,"ion-col",15),e._uU(3,"ID"),e.qZA(),e.TgZ(4,"ion-col",15),e._uU(5,"NOMBRE"),e.qZA(),e.TgZ(6,"ion-col",15),e._uU(7,"APELLIDO"),e.qZA(),e.TgZ(8,"ion-col",15),e._uU(9,"EMAIL"),e.qZA(),e.TgZ(10,"ion-col",15),e._uU(11,"TEL\xc9FONO"),e.qZA(),e._UZ(12,"ion-col",16),e.qZA(),e.YNc(13,M,14,8,"ion-row",17),e.qZA()),2&t){const i=e.oxw();e.xp6(13),e.Q6J("ngForOf",i.clientesFiltrados?i.clientesFiltrados:i.clientes)}}const L=[{path:"",component:(()=>{var t;class s{constructor(n,o,a,r,g,w,A){this.clienteService=n,this.router=o,this.authService=a,this.authCliente=r,this.menuService=g,this.alertController=w,this.themeService=A,this.coloresFilas=["#FFECBA","#FFFFFF"],this.getUserRole(),console.log("Rol obtenido:",this.rol),this.isDarkMode=this.themeService.isDarkTheme()}ngOnInit(){this.componentes=this.menuService.getMenuOpts()}getUserRole(){this.rol=this.authService.getUserRole(),console.log(this.rol),"administrador"!==this.rol?(console.error("Usuario con rol",this.rol,"no tiene permiso para acceder a esta opci\xf3n."),this.authService.logout().subscribe(()=>{localStorage.removeItem("role"),localStorage.removeItem("usuario"),this.router.navigate(["/inicio"])},n=>{console.error("Error al cerrar sesion:",n)})):this.getClientes()}getClientes(){var n=this;this.clienteService.getClientes().subscribe(function(){var o=(0,f.Z)(function*(a){n.clientes=a,console.log("Clientes datos:",n.clientes)});return function(a){return o.apply(this,arguments)}}())}borrarCliente(n){var o=this;return(0,f.Z)(function*(){yield(yield o.alertController.create({header:"Confirmar",message:"\xbfEst\xe1s seguro de que deseas borrar a este cliente?",buttons:[{text:"Cancelar",role:"cancel",handler:()=>{console.log("Borrado cancelado")}},{text:"Borrar",handler:()=>{try{o.clienteService.borrarCliente(n).subscribe(function(){var r=(0,f.Z)(function*(g){console.log(g),o.getClientes()});return function(g){return r.apply(this,arguments)}}())}catch(r){console.error(r)}}}]})).present()})()}filtrarClientes(n,o){o||(o=""),this.clientesFiltrados=this.clientes.filter(a=>{const r=o.toLowerCase();switch(n){case"nombre":return a.nombre.toLowerCase().includes(r);case"apellido":return a.apellido.toLowerCase().includes(r);case"email":return a.email.toLowerCase().includes(r);case"telf":return a.telf.toLowerCase().includes(r);default:return!1}})}toggleDarkMode(){this.isDarkMode=!this.isDarkMode,this.themeService.setDarkTheme(this.isDarkMode);const n=document.querySelector("ion-content");n&&n.classList.toggle("dark-mode",this.isDarkMode)}cerrarSesion(){this.authService.logout().subscribe()}}return(t=s).\u0275fac=function(n){return new(n||t)(e.Y36(p.Y),e.Y36(d.F0),e.Y36(_.e),e.Y36(C.S),e.Y36(v.h),e.Y36(l.Br),e.Y36(Z.f))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-listacli"]],decls:7,vars:2,consts:[[3,"class",4,"ngIf"],["placeholder","Buscar por nombre",3,"ionInput"],["placeholder","Buscar por apellido",3,"ionInput"],["placeholder","Buscar por correo electr\xf3nico",3,"ionInput"],["placeholder","Buscar por tel\xe9fono",3,"ionInput"],["class","tabla-ancha tabla-centrada",4,"ngIf"],["slot","start"],["defaultHref","/config-empleados",2,"--color","#ff830f"],["color","primary",2,"font-size","20px"],["slot","end"],[3,"click"],[2,"color","#ff830f","font-size","24px",3,"name"],["name","log-out-outline","size","large",1,"color-salir"],[1,"tabla-ancha","tabla-centrada"],[1,"fila-bordes",2,"text-align","center","font-weight","bold"],[1,"columna","encabezado-naranja"],[1,"columna","iconos"],["class","fila-bordes","style","text-align: center;",3,"ngStyle",4,"ngFor","ngForOf"],[1,"fila-bordes",2,"text-align","center",3,"ngStyle"],[1,"columna"],["name","trash-outline","size","small"]],template:function(n,o){1&n&&(e.YNc(0,P,11,3,"ion-header",0),e.TgZ(1,"ion-content")(2,"ion-searchbar",1),e.NdJ("ionInput",function(r){return o.filtrarClientes("nombre",r.target.value||"")}),e.qZA(),e.TgZ(3,"ion-searchbar",2),e.NdJ("ionInput",function(r){return o.filtrarClientes("apellido",r.target.value||"")}),e.qZA(),e.TgZ(4,"ion-searchbar",3),e.NdJ("ionInput",function(r){return o.filtrarClientes("email",r.target.value||"")}),e.qZA(),e.TgZ(5,"ion-searchbar",4),e.NdJ("ionInput",function(r){return o.filtrarClientes("telf",r.target.value||"")}),e.qZA(),e.YNc(6,x,14,1,"ion-grid",5),e.qZA()),2&n&&(e.Q6J("ngIf","administrador"===o.rol),e.xp6(6),e.Q6J("ngIf","administrador"===o.rol))},dependencies:[u.sg,u.O5,u.PC,l.YG,l.Sm,l.wI,l.W2,l.jY,l.Gu,l.gu,l.Nd,l.VI,l.wd,l.sr,l.j9,l.oU],styles:['@charset "UTF-8";ion-toolbar[_ngcontent-%COMP%], ion-title[_ngcontent-%COMP%], ion-col[_ngcontent-%COMP%]{font-size:2vw}ion-title[_ngcontent-%COMP%]{text-align:center}.color-salir[_ngcontent-%COMP%]{color:#ff830f}.iconos[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.5vw;color:#ff830f;overflow:visible}.tabla-centrada[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.fila-bordes[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #E0E0E0;border-radius:10px;overflow:hidden;display:flex;justify-content:space-between;align-items:center;width:100%;color:#000!important}.encabezado-naranja[_ngcontent-%COMP%]{color:#ff830f!important}.columna[_ngcontent-%COMP%]{flex:2;text-align:center}.iconos[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center;flex:1;margin-right:1px}.iconos[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.5vw}.tabla-ancha[_ngcontent-%COMP%]{max-width:90vw;margin:auto}.dark-mode[_ngcontent-%COMP%]{filter:none}@media screen and (max-width: 768px){ion-title.tabla-ancha[_ngcontent-%COMP%]{font-size:3vw}.columna[_ngcontent-%COMP%], .iconos[_ngcontent-%COMP%]{flex:1;font-size:2.5vw}ion-icon[_ngcontent-%COMP%]{font-size:4vw}}']}),s})()}];let T=(()=>{var t;class s{}return(t=s).\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[d.Bz.forChild(L),d.Bz]}),s})(),O=(()=>{var t;class s{}return(t=s).\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[u.ez,m.u5,l.Pc,T]}),s})()}}]);