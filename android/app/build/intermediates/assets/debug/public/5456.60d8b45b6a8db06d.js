"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5456],{5456:(S,p,r)=>{r.r(p),r.d(p,{ContactoPageModule:()=>D});var u=r(6814),l=r(6223),a=r(878),m=r(9634),C=r(7398),_=r(6306),f=r(2096),o=r(9212),M=r(2333),x=r(344),v=r(2759),P=r(2042),Z=r(2471);function b(n,s){if(1&n){const e=o.EpF();o.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",2),o._UZ(3,"ion-back-button",3),o.qZA(),o.TgZ(4,"ion-title",4),o._uU(5,"Contacto"),o.qZA(),o.TgZ(6,"ion-buttons",5)(7,"ion-button",6),o.NdJ("click",function(){o.CHM(e);const i=o.oxw();return o.KtG(i.toggleDarkMode())}),o._UZ(8,"ion-icon",7),o.qZA(),o.TgZ(9,"ion-button",6),o.NdJ("click",function(){o.CHM(e);const i=o.oxw();return o.KtG(i.cerrarSesion())}),o._UZ(10,"ion-icon",8),o.qZA()()()()}if(2&n){const e=o.oxw();o.Tol(e.isDarkMode?"dark-theme":""),o.xp6(8),o.Q6J("name",e.isDarkMode?"sunny-outline":"moon-outline")}}function k(n,s){if(1&n&&(o.TgZ(0,"div",21),o._UZ(1,"ion-icon",22),o.TgZ(2,"p"),o._uU(3),o.qZA(),o._UZ(4,"ion-icon",23),o.TgZ(5,"p"),o._uU(6),o.qZA(),o._UZ(7,"ion-icon",24),o.TgZ(8,"p"),o._uU(9),o.qZA(),o.TgZ(10,"p"),o._uU(11),o.qZA()()),2&n){const e=s.$implicit,t=o.oxw(2);o.Q6J("ngClass",t.isDarkMode?"dark-theme":"light-theme"),o.xp6(3),o.Oqu(e.nomLocal),o.xp6(3),o.Oqu(e.direccion),o.xp6(3),o.Oqu(e.telf1),o.xp6(2),o.Oqu(e.telf2)}}function O(n,s){if(1&n){const e=o.EpF();o.TgZ(0,"ion-content",9)(1,"form",10),o.NdJ("ngSubmit",function(){o.CHM(e);const i=o.oxw();return o.KtG(i.enviarDatos())}),o.TgZ(2,"ion-row",11)(3,"ion-label"),o._uU(4,"Restaurante"),o.qZA()(),o.TgZ(5,"ion-row",11),o._UZ(6,"ion-input",12),o.qZA(),o.TgZ(7,"ion-row",11)(8,"ion-label"),o._uU(9,"Direcci\xf3n"),o.qZA()(),o.TgZ(10,"ion-row",11),o._UZ(11,"ion-input",13),o.qZA(),o.TgZ(12,"ion-row",11)(13,"ion-label"),o._uU(14,"Tel\xe9fono 1"),o.qZA()(),o.TgZ(15,"ion-row",11),o._UZ(16,"ion-input",14),o.qZA(),o.TgZ(17,"ion-row",11)(18,"ion-label"),o._uU(19,"Tel\xe9fono 2"),o.qZA()(),o.TgZ(20,"ion-row",11),o._UZ(21,"ion-input",15),o.qZA(),o._UZ(22,"input",16)(23,"input",17),o.TgZ(24,"ion-button",18),o.NdJ("click",function(){o.CHM(e);const i=o.oxw();return o.KtG(i.enviarDatos())}),o._uU(25," A\xf1adir datos "),o.qZA(),o.TgZ(26,"div",19),o.YNc(27,k,12,5,"div",20),o.qZA()()()}if(2&n){const e=o.oxw();o.xp6(),o.Q6J("formGroup",e.ionicForm),o.xp6(),o.Q6J("ngClass",e.isDarkMode?"dark-theme":"light-theme"),o.xp6(3),o.Q6J("ngClass",e.isDarkMode?"dark-theme":"light-theme"),o.xp6(2),o.Q6J("ngClass",e.isDarkMode?"dark-theme":"light-theme"),o.xp6(3),o.Q6J("ngClass",e.isDarkMode?"dark-theme":"light-theme"),o.xp6(2),o.Q6J("ngClass",e.isDarkMode?"dark-theme":"light-theme"),o.xp6(3),o.Q6J("ngClass",e.isDarkMode?"dark-theme":"light-theme"),o.xp6(2),o.Q6J("ngClass",e.isDarkMode?"dark-theme":"light-theme"),o.xp6(3),o.Q6J("ngClass",e.isDarkMode?"dark-theme":"light-theme"),o.xp6(2),o.Q6J("value",e.id_empresa),o.xp6(),o.Q6J("value",e.id_user),o.xp6(4),o.Q6J("ngForOf",e.datosFiltrados)}}const U=[{path:"",component:(()=>{var n;class s{constructor(t,i,g,c,h,d,J){this.router=t,this.formBuilder=i,this.authService=g,this.contactService=c,this.usuariosService=h,this.menuService=d,this.themeService=J,this.id_empresa=null,this.id_user=null,this.getUserRole(),this.isDarkMode=this.themeService.isDarkTheme(),this.ionicForm=this.formBuilder.group({nomLocal:["",[l.kI.required]],direccion:[""],telf1:[""],telf2:[""],id_empresa:[""],id_user:[""]})}ngOnInit(){this.componentes=this.menuService.getMenuOpts(),this.obtenerIdUsuario().subscribe(({idUsuario:t,idEmpresa:i})=>{this.id_user=t,this.id_empresa=i,this.getDatos()},t=>{console.error("Error al obtener el id del usuario y la empresa:",t)})}obtenerIdUsuario(){const t=localStorage.getItem("usuario");if(t){const g=JSON.parse(t).email;return this.usuariosService.getUserAndEmpresaByEmail(g).pipe((0,C.U)(c=>{if(c&&200===c.code&&c.data){const h=c.data.id_user?c.data.id_user:null,d=c.data.id_empresa?c.data.id_empresa:null;return this.idEmpresa=d,{idUsuario:h,idEmpresa:d}}return console.error("No se pudieron obtener los datos del usuario:",c.texto),{idUsuario:null,idEmpresa:null}}),(0,_.K)(c=>(console.error("Error al obtener datos del usuario:",c),(0,f.of)({idUsuario:null,idEmpresa:null}))))}return console.error("Usuario no encontrado en el almacenamiento local"),(0,f.of)({idUsuario:null,idEmpresa:null})}getUserRole(){this.rol=this.authService.getUserRole(),"administrador"===this.rol||"encargado"===this.rol||(console.error("Usuario con rol",this.rol,"no tiene permiso para acceder a esta opci\xf3n."),this.authService.logout().subscribe(()=>{localStorage.removeItem("role"),localStorage.removeItem("usuario"),this.router.navigate(["/inicio"])},t=>{console.error("Error al cerrar sesi\xf3n:",t)}))}enviarDatos(){if(this.ionicForm.valid)if(null!==this.id_empresa&&null!==this.id_user){const t={...this.ionicForm.value,id_empresa:this.id_empresa,id_user:this.id_user};this.contactService.subirDatos(t,this.id_empresa,this.id_user).subscribe(i=>{this.ionicForm.reset(),this.getDatos()},i=>{console.error("Error en la solicitud:",i)})}else console.error("No se pudo obtener el id de la empresa o el id del usuario.")}getDatos(){null!==this.idEmpresa?this.contactService.getDatosByEmpresa(this.idEmpresa).subscribe(t=>{200===t.code?(this.datos=t.data,this.datosFiltrados=t.data,console.log("Datos obtenidos:",this.datos)):console.error("Error en la respuesta:",t.texto)},t=>{console.error("Error al obtener los datos:",t)}):console.error("ID de empresa no v\xe1lido.")}toggleDarkMode(){this.isDarkMode=!this.isDarkMode,this.themeService.setDarkTheme(this.isDarkMode)}cerrarSesion(){this.authService.logout().subscribe()}}return(n=s).\u0275fac=function(t){return new(t||n)(o.Y36(m.F0),o.Y36(l.qu),o.Y36(M.e),o.Y36(x.A),o.Y36(v.J),o.Y36(P.h),o.Y36(Z.f))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-contacto"]],decls:2,vars:2,consts:[[3,"class",4,"ngIf"],["class","custom-content",4,"ngIf"],["slot","start"],["defaultHref","/home",2,"--color","#ff830f"],["color","primary"],["slot","end"],[3,"click"],[2,"color","#ff830f","font-size","24px",3,"name"],["name","log-out-outline","size","large",1,"color-salir"],[1,"custom-content"],[3,"formGroup","ngSubmit"],[3,"ngClass"],["formControlName","nomLocal","type","text"],["formControlName","direccion","type","text"],["formControlName","telf1","type","tel"],["formControlName","telf2","placeholder","opcional..","type","tel"],["type","hidden","formControlName","id_empresa",3,"value"],["type","hidden","formControlName","id_user",3,"value"],["expand","block","fill","clear","shape","round",1,"color-btn",3,"click"],[1,"center-container","ion-text-center"],["class","text-container",3,"ngClass",4,"ngFor","ngForOf"],[1,"text-container",3,"ngClass"],["name","restaurant-outline"],["name","location-outline"],["name","call-outline"]],template:function(t,i){1&t&&o.YNc(0,b,11,3,"ion-header",0)(1,O,28,12,"ion-content",1),2&t&&(o.Q6J("ngIf","administrador"===i.rol||"encargado"===i.rol),o.xp6(),o.Q6J("ngIf","administrador"===i.rol||"encargado"===i.rol))},dependencies:[u.mk,u.sg,u.O5,l._Y,l.Fj,l.JJ,l.JL,a.YG,a.Sm,a.W2,a.Gu,a.gu,a.pK,a.Q$,a.Nd,a.wd,a.sr,a.j9,a.oU,l.sg,l.u],styles:['@charset "UTF-8";ion-content.custom-content[_ngcontent-%COMP%]{--padding-start: 20px !important;--padding-end: 20px !important;--padding-top: 20px !important;--padding-bottom: 20px !important;margin:10px!important}.center-container[_ngcontent-%COMP%]{width:80%;margin:0 auto;display:flex;flex-direction:column;align-items:center;justify-content:center;height:50vh}.alert-orange-text[_ngcontent-%COMP%]{color:#ff830f}.color-btn[_ngcontent-%COMP%]{--background: #ff830f !important;color:#fff!important}ion-icon[_ngcontent-%COMP%]{font-size:1.5em;color:#ff830f}ion-icon.trash[_ngcontent-%COMP%]{color:#fff!important}ion-label[_ngcontent-%COMP%]{font-weight:700;font-size:18px}.color-btn[_ngcontent-%COMP%]{background-color:#ff830f;border-radius:10px;font-size:12px;margin-bottom:5px}.color-btn2[_ngcontent-%COMP%]{border-radius:10px;background-color:#ff830f;margin-bottom:25px!important}ion-row[_ngcontent-%COMP%]{justify-content:flex-start;padding-left:5px;width:100%}.dark-theme[_ngcontent-%COMP%]   .image-dark[_ngcontent-%COMP%]{filter:invert(100%)}.color-salir[_ngcontent-%COMP%]{color:#ff830f}ion-title[_ngcontent-%COMP%]{text-align:center}p[_ngcontent-%COMP%]{font-size:18px}.dark-theme[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%], .dark-theme[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%], .dark-theme[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff}.light-theme[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%], .light-theme[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%], .light-theme[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#000}']}),s})()}];let T=(()=>{var n;class s{}return(n=s).\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[m.Bz.forChild(U),m.Bz]}),s})(),D=(()=>{var n;class s{}return(n=s).\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[u.ez,l.u5,a.Pc,l.UX,T]}),s})()}}]);