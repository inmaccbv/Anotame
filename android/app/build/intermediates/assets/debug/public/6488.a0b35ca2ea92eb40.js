"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6488],{6488:(y,m,l)=>{l.r(m),l.d(m,{LoginPageModule:()=>A});var d=l(6814),n=l(6223),i=l(878),c=l(9634),p=l(5861),o=l(9212),f=l(2759),h=l(2333);function b(e,a){1&e&&(o.TgZ(0,"ion-label",14),o._uU(1,"Email requerido"),o.qZA())}function P(e,a){1&e&&(o.TgZ(0,"ion-label",14),o._uU(1,"Email no valido"),o.qZA())}function Z(e,a){1&e&&(o.TgZ(0,"ion-label",14),o._uU(1,"Password requerido"),o.qZA())}function L(e,a){1&e&&(o.TgZ(0,"ion-label",14),o._uU(1,"Longitud minimo 6 caracteres"),o.qZA())}const v=[{path:"",component:(()=>{var e;class a{constructor(t,r,g,u,T){this.formBuilder=t,this.router=r,this.alertController=g,this.userLogin=u,this.authService=T,this.submitted=!1,this.recordarDatos=!1,this.BASE_RUTA="http://localhost/anotame/APIANOTAME/public/",this.loginForm=this.formBuilder.group({email:new n.NI("",n.kI.compose([n.kI.required,n.kI.pattern("^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$")])),password:new n.NI("",n.kI.compose([n.kI.required,n.kI.minLength(6)])),recordarDatos:[!1]})}ngOnInit(){const t=localStorage.getItem("userId");t&&this.loginForm.patchValue({userId:t}),t&&this.loginForm.patchValue({userId:t})}get f(){return this.loginForm.controls}alert(t){this.recordarDatos=this.loginForm.controls.recordarDatos.value,this.submitted=!0,!this.loginForm.invalid&&this.enviarDatos()}enviarDatos(){this.userLogin.loginUser(this.loginForm.value).subscribe(t=>{this.authService.storeUserRole(t),localStorage.setItem("usuario",JSON.stringify(this.loginForm.value)),this.router.navigate(["/home"])},t=>{console.error("Error al obtener el rol del usuario:",t),this.presentAlert("Error","Usuario o contrase\xf1a incorrectos")})}presentAlert(t,r){var g=this;return(0,p.Z)(function*(){yield(yield g.alertController.create({header:t,message:r,buttons:["OK"]})).present()})()}}return(e=a).\u0275fac=function(t){return new(t||e)(o.Y36(n.qu),o.Y36(c.F0),o.Y36(i.Br),o.Y36(f.J),o.Y36(h.e))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-login"]],decls:31,vars:6,consts:[["slot","start"],["href","/inicio"],["src","./../../../assets/img/ic-inicio.png",2,"width","84px"],[1,"ion-text-center"],[3,"formGroup","ngSubmit"],["lines","full"],["position","floating"],["type","text","formControlName","email",1,"inputs"],["style","font-size: 10px;","class","errormessage","position","floating",4,"ngIf"],["type","password","formControlName","password"],["position","floating",2,"margin-bottom","8px"],["type","checkbox","formControlName","recordarDatos"],["type","submit","expand","block","name","submit",3,"disabled","click"],["href","/registroempresa",1,"small-text"],["position","floating",1,"errormessage",2,"font-size","10px"]],template:function(t,r){1&t&&(o.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0)(3,"a",1),o._UZ(4,"img",2),o.qZA()(),o.TgZ(5,"ion-title",3),o._uU(6,"Login"),o.qZA()()(),o.TgZ(7,"ion-content")(8,"form",4),o.NdJ("ngSubmit",function(){return r.enviarDatos()}),o.TgZ(9,"ion-item",5)(10,"ion-label",6),o._uU(11,"Email"),o.qZA(),o._UZ(12,"ion-input",7),o.qZA(),o.YNc(13,b,2,0,"ion-label",8)(14,P,2,0,"ion-label",8),o.TgZ(15,"ion-item",5)(16,"ion-label",6),o._uU(17,"Contrase\xf1a"),o.qZA(),o._UZ(18,"ion-input",9),o.qZA(),o.YNc(19,Z,2,0,"ion-label",8)(20,L,2,0,"ion-label",8),o.TgZ(21,"ion-item",5)(22,"ion-label",10),o._uU(23,"Recordar usuario y contrase\xf1a"),o.qZA(),o._UZ(24,"ion-checkbox",11),o.qZA(),o.TgZ(25,"ion-row")(26,"ion-col")(27,"ion-button",12),o.NdJ("click",function(u){return r.alert(u)}),o._uU(28,"Iniciar Sesi\xf3n"),o.qZA(),o.TgZ(29,"a",13),o._uU(30,"Registrarse"),o.qZA()()()()()),2&t&&(o.xp6(8),o.Q6J("formGroup",r.loginForm),o.xp6(5),o.Q6J("ngIf",null!=r.f.email.getError("required")),o.xp6(),o.Q6J("ngIf",null!=r.f.email.getError("pattern")),o.xp6(5),o.Q6J("ngIf",null!=r.f.password.getError("required")),o.xp6(),o.Q6J("ngIf",null!=r.f.password.getError("minLength")),o.xp6(7),o.Q6J("disabled",!r.loginForm.valid))},dependencies:[d.O5,n._Y,n.JJ,n.JL,i.YG,i.Sm,i.nz,i.wI,i.W2,i.Gu,i.pK,i.Ie,i.Q$,i.Nd,i.wd,i.sr,i.w,i.j9,n.sg,n.u],styles:[".email-label[_ngcontent-%COMP%], .password-label[_ngcontent-%COMP%]{font-size:1vw}p[_ngcontent-%COMP%]{font-family:Lato}ion-input[type=password][_ngcontent-%COMP%]{--background: transparent !important}ion-grid[_ngcontent-%COMP%]{border:2px solid #ff830f;background-color:#343541}ion-button[_ngcontent-%COMP%]{color:#fff;background-color:#ff830f;border-radius:10px}ion-checkbox[_ngcontent-%COMP%]{margin-top:22px}ion-title[_ngcontent-%COMP%]{text-align:center}"]}),a})()}];let I=(()=>{var e;class a{}return(e=a).\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[c.Bz.forChild(v),c.Bz]}),a})(),A=(()=>{var e;class a{}return(e=a).\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[d.ez,n.u5,i.Pc,n.UX,I]}),a})()}}]);