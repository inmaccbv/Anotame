"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[227],{227:(C,u,a)=>{a.r(u),a.d(u,{LogincliPageModule:()=>A});var m=a(6814),t=a(6223),i=a(878),d=a(9634),f=a(5861),o=a(9212),p=a(9306),h=a(1660);function b(e,r){1&e&&(o.TgZ(0,"ion-label",14),o._uU(1,"Email requerido"),o.qZA())}function P(e,r){1&e&&(o.TgZ(0,"ion-label",14),o._uU(1,"Email no valido"),o.qZA())}function Z(e,r){1&e&&(o.TgZ(0,"ion-label",14),o._uU(1,"Password requerido"),o.qZA())}function L(e,r){1&e&&(o.TgZ(0,"ion-label",14),o._uU(1,"Longitud minimo 6 caracteres"),o.qZA())}const v=[{path:"",component:(()=>{var e;class r{constructor(n,l,g,c){this.formBuilder=n,this.alertController=l,this.clienteService=g,this.authCliente=c,this.submitted=!1,this.recordarDatos=!1,this.BASE_RUTA="http://localhost/anotame/APIANOTAME/public/",this.loginForm=this.formBuilder.group({email:new t.NI("",t.kI.compose([t.kI.required,t.kI.pattern("^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$")])),password:new t.NI("",t.kI.compose([t.kI.required,t.kI.minLength(6)])),recordarDatos:[!1]})}ngOnInit(){const n=localStorage.getItem("clienteId");n&&this.loginForm.patchValue({clienteId:n}),n&&this.loginForm.patchValue({clienteId:n})}get f(){return this.loginForm.controls}alert(n){console.log(n.target),this.recordarDatos=this.loginForm.controls.recordarDatos.value,this.submitted=!0}enviarDatos(){this.clienteService.loginCliente(this.loginForm.value).subscribe(n=>{this.authCliente.storeUserRole(n),localStorage.setItem("cliente",JSON.stringify(this.loginForm.value)),console.log("Rol almacenado en el localStorage:",localStorage.getItem("role")),window.location.href="/seleccion-empresa"},n=>{console.error("Error al obtener el rol del cliente:",n),this.presentAlert("Error","Cliente o contrase\xf1a incorrectos")})}presentAlert(n,l){var g=this;return(0,f.Z)(function*(){console.log("Mostrando alerta:",n,l);const c=yield g.alertController.create({header:n,message:l,buttons:["OK"]});c.onDidDismiss().then(()=>{console.log("Alerta cerrada")}),yield c.present()})()}}return(e=r).\u0275fac=function(n){return new(n||e)(o.Y36(t.qu),o.Y36(i.Br),o.Y36(p.Y),o.Y36(h.S))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-logincli"]],decls:31,vars:6,consts:[["slot","start"],["href","/inicio"],["src","./../../../assets/img/ic-inicio.png",2,"width","84px"],[1,"ion-text-center"],[3,"formGroup","ngSubmit"],["lines","full"],["position","floating"],["type","text","formControlName","email",1,"inputs"],["style","font-size: 10px;","class","errormessage","position","floating",4,"ngIf"],["type","password","formControlName","password"],["position","floating",2,"margin-bottom","8px"],["type","checkbox","formControlName","recordarDatos"],["href","/seleccion-empresa","type","submit","color","danger","expand","block","name","submit",3,"disabled","click"],["href","/registrocli",1,"small-text"],["position","floating",1,"errormessage",2,"font-size","10px"]],template:function(n,l){1&n&&(o.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0)(3,"a",1),o._UZ(4,"img",2),o.qZA()(),o.TgZ(5,"ion-title",3),o._uU(6,"Login Cliente"),o.qZA()()(),o.TgZ(7,"ion-content")(8,"form",4),o.NdJ("ngSubmit",function(){return l.enviarDatos()}),o.TgZ(9,"ion-item",5)(10,"ion-label",6),o._uU(11,"Email"),o.qZA(),o._UZ(12,"ion-input",7),o.qZA(),o.YNc(13,b,2,0,"ion-label",8)(14,P,2,0,"ion-label",8),o.TgZ(15,"ion-item",5)(16,"ion-label",6),o._uU(17,"Contrase\xf1a"),o.qZA(),o._UZ(18,"ion-input",9),o.qZA(),o.YNc(19,Z,2,0,"ion-label",8)(20,L,2,0,"ion-label",8),o.TgZ(21,"ion-item",5)(22,"ion-label",10),o._uU(23,"Recordar usuario y contrase\xf1a"),o.qZA(),o._UZ(24,"ion-checkbox",11),o.qZA(),o.TgZ(25,"ion-row")(26,"ion-col")(27,"ion-button",12),o.NdJ("click",function(c){return l.alert(c)}),o._uU(28,"Iniciar Sesi\xf3n"),o.qZA(),o.TgZ(29,"a",13),o._uU(30,"Registrarse"),o.qZA()()()()()),2&n&&(o.xp6(8),o.Q6J("formGroup",l.loginForm),o.xp6(5),o.Q6J("ngIf",null!=l.f.email.getError("required")),o.xp6(),o.Q6J("ngIf",null!=l.f.email.getError("pattern")),o.xp6(5),o.Q6J("ngIf",null!=l.f.password.getError("required")),o.xp6(),o.Q6J("ngIf",null!=l.f.password.getError("minLength")),o.xp6(7),o.Q6J("disabled",!l.loginForm.valid))},dependencies:[m.O5,t._Y,t.JJ,t.JL,i.YG,i.Sm,i.nz,i.wI,i.W2,i.Gu,i.pK,i.Ie,i.Q$,i.Nd,i.wd,i.sr,i.w,i.j9,t.sg,t.u],styles:[".email-label[_ngcontent-%COMP%], .password-label[_ngcontent-%COMP%]{font-size:1vw}p[_ngcontent-%COMP%]{font-family:Lato}.errormessage[_ngcontent-%COMP%]{color:red;font-size:2.5vw}ion-input[type=password][_ngcontent-%COMP%]{--background: transparent !important}ion-grid[_ngcontent-%COMP%]{border:2px solid #ff830f;background-color:#343541}ion-button[_ngcontent-%COMP%]{color:#fff;background-color:#ff830f;border-radius:10px}ion-checkbox[_ngcontent-%COMP%]{margin-top:22px}ion-title[_ngcontent-%COMP%]{text-align:center}"]}),r})()}];let I=(()=>{var e;class r{}return(e=r).\u0275fac=function(n){return new(n||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[d.Bz.forChild(v),d.Bz]}),r})(),A=(()=>{var e;class r{}return(e=r).\u0275fac=function(n){return new(n||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[m.ez,t.u5,i.Pc,t.UX,I]}),r})()}}]);